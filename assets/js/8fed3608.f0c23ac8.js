"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3079],{371:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var s=t(5893),i=t(1151);const r={title:"IBM Security Verify",sidebar_position:1,description:"Integrating IBM Security Verify into Watsonx Assistant",custom_edit_url:null},a="IBM Security Verify Integration",o={id:"Create/Identity and Access Management/IBM_Security_Verify",title:"IBM Security Verify",description:"Integrating IBM Security Verify into Watsonx Assistant",source:"@site/docs/04-Create/06-Identity and Access Management/01-IBM_Security_Verify.mdx",sourceDirName:"04-Create/06-Identity and Access Management",slug:"/Create/Identity and Access Management/IBM_Security_Verify",permalink:"/solution-unified-virtual-assistant/Create/Identity and Access Management/IBM_Security_Verify",draft:!1,unlisted:!1,editUrl:null,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"IBM Security Verify",sidebar_position:1,description:"Integrating IBM Security Verify into Watsonx Assistant",custom_edit_url:null},sidebar:"tutorialSidebar",previous:{title:"watsonx Orchestrate Skill Flow",permalink:"/solution-unified-virtual-assistant/Create/Subordinate Bots/watsonx_orchestrate"},next:{title:"Simulated",permalink:"/solution-unified-virtual-assistant/Create/Identity and Access Management/Simulated"}},l={},c=[{value:"Setting up IBM Security Verify",id:"setting-up-ibm-security-verify",level:2},{value:"Create Users and Groups",id:"create-users-and-groups",level:3},{value:"Create API Client",id:"create-api-client",level:3},{value:"Assistant Custom Extension",id:"assistant-custom-extension",level:2},{value:"Identify OpenAPI spec values",id:"identify-openapi-spec-values",level:3},{value:"Create the Custom Extension",id:"create-the-custom-extension",level:3},{value:"Action Integration",id:"action-integration",level:3},{value:"<strong>Verify a Username and Password</strong>",id:"verify-a-username-and-password",level:4},{value:"<strong>Authenticate using a One Time Password (OTP)</strong>",id:"authenticate-using-a-one-time-password-otp",level:4},{value:"<strong>Reset Password</strong>",id:"reset-password",level:4},{value:"A note on schemas, arrays, and watsonx assistant&#39;s general quirkiness",id:"a-note-on-schemas-arrays-and-watsonx-assistants-general-quirkiness",level:4}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"ibm-security-verify-integration",children:"IBM Security Verify Integration"}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["Prerequisite: ",(0,s.jsx)(n.a,{href:"/Prepare/Requirements#user-authentication",children:"IBM Security Verify Software Requirement"})]})}),"\n",(0,s.jsx)(n.p,{children:"This section will go over how to setup IBM Security Verify and integrate it with Watsonx Assistant to verify users, authenticate using a one time password (OTP)\n, and reset passwords."}),"\n",(0,s.jsx)(n.h2,{id:"setting-up-ibm-security-verify",children:"Setting up IBM Security Verify"}),"\n",(0,s.jsx)("div",{style:{borderBottom:"1px solid #000",marginTop:"20px",marginBottom:"20px"}}),"\n",(0,s.jsx)(n.h3,{id:"create-users-and-groups",children:"Create Users and Groups"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Login into the dedicated IBM Security Verify instance"}),"\n",(0,s.jsx)(n.li,{children:'Click on the user profile in the top right corner and select "Switch to admin"'}),"\n",(0,s.jsx)(n.li,{children:'In the sidebar, navigate to "Directory" -> "Users and Groups"'}),"\n",(0,s.jsxs)(n.li,{children:['Select "Add User+" and fill out the necessary fields.',"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Provide an email you have access to for each added user."}),"\n",(0,s.jsx)(n.li,{children:'Make sure to "View extended profile" to fill out the other fields if applicable'}),"\n"]})}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:'Navigate to the "Groups" tab and select "Add Group" and fill out the required fields and assign the appropriate users.'}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"create-api-client",children:"Create API Client"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Login into the dedicated IBM Security Verify instance"}),"\n",(0,s.jsx)(n.li,{children:'Click on the user profile in the top right corner and select "Switch to admin"'}),"\n",(0,s.jsx)(n.li,{children:'In the sidebar, navigate to "Security" -> "API Access"'}),"\n",(0,s.jsx)(n.li,{children:'Select "Add API Client +"'}),"\n",(0,s.jsx)(n.li,{children:'Fill out the necessary fields and save the "Client ID" and "Client Secret" values for later reference'}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"assistant-custom-extension",children:"Assistant Custom Extension"}),"\n",(0,s.jsx)("div",{style:{borderBottom:"1px solid #000",marginTop:"20px",marginBottom:"20px"}}),"\n",(0,s.jsx)(n.p,{children:"Before jumping to the custom watsonx assistant we created for IBM Security Verify, it would be prudent to explore the included postman collection for the Verify API. Because of the way that watsonx assistant handles json arrays (or to be more specific, doesn't handle json arrays), you will need to manually set some of the inputs in case they are arrays. Making API calls using the postman collection makes this process quite a bit easier."}),"\n",(0,s.jsx)(n.h3,{id:"identify-openapi-spec-values",children:"Identify OpenAPI spec values"}),"\n",(0,s.jsx)(n.p,{children:"Three values will be needed to connect to IBM Security Verify:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"verify instance url"}),"\n",(0,s.jsx)(n.li,{children:"client_id"}),"\n",(0,s.jsx)(n.li,{children:"client_secret"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The client_id and client_secret will need to be for a corresponding admin account.\nTODO: Add instructions for getting these values"}),"\n",(0,s.jsx)(n.h3,{id:"create-the-custom-extension",children:"Create the Custom Extension"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Navigate and download the OpenAPI spec for another assistant bot ",(0,s.jsx)(n.a,{href:"https://github.ibm.com/ibm-client-engineering/solution-watsonx-orchestrate/tree/main/assets/openAPI_specs/IBM%20Verify/Verify_Spec_V3.json",children:"here"})]}),"\n",(0,s.jsxs)(n.li,{children:["Modify the server url at line 10 with the ",(0,s.jsx)(n.code,{children:"service instance url"})," from step 3 ",(0,s.jsx)(n.a,{href:"#identify-openapi-spec-values",children:"here"})]}),"\n",(0,s.jsx)(n.li,{children:"Navigate to the integrations section within the Assistant Builder sidebar"}),"\n",(0,s.jsx)(n.li,{children:'Select "Build custom extension" and name the extension'}),"\n",(0,s.jsx)(n.li,{children:'Upload the OpenApi spec from step 1 and press "Finish"'}),"\n",(0,s.jsx)(n.li,{children:'Select "Add+" within the newly configured extension'}),"\n",(0,s.jsxs)(n.li,{children:['Select "Next" and update values:',"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Authentication type: Oauth 2.0"}),"\n",(0,s.jsx)(n.li,{children:"Client ID: client_id"}),"\n",(0,s.jsx)(n.li,{children:"Client Secret: client_secret"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"action-integration",children:"Action Integration"}),"\n",(0,s.jsx)(n.p,{children:"This extension has 3 features with 4 api calls total"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#verify-a-username-and-password",children:"Verify username and password"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#authenticate-using-a-one-time-password-(otp)",children:"Authenticate using a OTP"})," (has two api calls)"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#reset-password",children:"Reset Password"})}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"verify-a-username-and-password",children:(0,s.jsx)(n.strong,{children:"Verify a Username and Password"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'Within the appropriate action, create a step and under "And then" select "Use an extension"'}),"\n",(0,s.jsxs)(n.li,{children:["Select the appropriate subordinate bot extension made ",(0,s.jsx)(n.a,{href:"#create-the-custom-extension",children:"here"})]}),"\n",(0,s.jsx)(n.li,{children:'Select the Operation as "verify user and pass"'}),"\n",(0,s.jsxs)(n.li,{children:["Set the Parameters to:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"returnUserRecord"}),": ",(0,s.jsx)(n.em,{children:"true"})," or ",(0,s.jsx)(n.em,{children:"false"})," depending on if you want the user data to be returned"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Accept"}),": */* see the note below"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"schemas"}),": ",(0,s.jsxs)(n.em,{children:['["urn:ietf:params:scim:schemas:ibm:core:2.0',":AuthenticateUser",'"]']})," see the note below"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"userName"}),": The username for the user logging in"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"password"}),": The password for the user logging in"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"authenticate-using-a-one-time-password-otp",children:(0,s.jsx)(n.strong,{children:"Authenticate using a One Time Password (OTP)"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'Create a new step after the step with the "create a session" extension (either in the same action or another)'}),"\n",(0,s.jsx)(n.li,{children:'Under the "And then" Section, select "Use an extension"'}),"\n",(0,s.jsxs)(n.li,{children:["Select the appropriate subordinate bot extension made ",(0,s.jsx)(n.a,{href:"#assistant-custom-extension",children:"here"})]}),"\n",(0,s.jsx)(n.li,{children:'Select the Operation as "Create and email otp transaction"'}),"\n",(0,s.jsxs)(n.li,{children:["Set the Parameters to:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"correlation"}),": any sequence of 4 numbers (these will appear to the verifying user as a sequence before a dash, followed by the actual verification code)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"emailAddress"}),": The email address to send the verification code to. If ",(0,s.jsx)(n.strong,{children:"returnUserRecord"})," is set to true above, the response json will include a list of all of the user's associated emails."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"Add a step and prompt the user to input the verification code they recieved less correlation."}),"\n",(0,s.jsx)(n.li,{children:'Add another extension call in a further step using the "Attempt email OTP verification" Operation'}),"\n",(0,s.jsxs)(n.li,{children:["Set the Parameters to:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"trxnid"}),": body.id from the extension call in step 3/4"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"otp"}),": The user input"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"reset-password",children:(0,s.jsx)(n.strong,{children:"Reset Password"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'Create a new step after the step with the "create a session" extension (either in the same action or another)'}),"\n",(0,s.jsx)(n.li,{children:'Under the "And then" Section, select "Use an extension"'}),"\n",(0,s.jsxs)(n.li,{children:["Select the appropriate subordinate bot extension made ",(0,s.jsx)(n.a,{href:"#assistant-custom-extension",children:"here"})]}),"\n",(0,s.jsx)(n.li,{children:'Select the Operation as "Change user\'s password"'}),"\n",(0,s.jsxs)(n.li,{children:["Set the Parameters to:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"userid"}),": The user's verify userid, if ",(0,s.jsx)(n.strong,{children:"returnUserRecord"})," is set to true above, the response json will include the user's userid."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"content-type"}),": ",(0,s.jsx)(n.em,{children:"application/scim+json"})," see this note"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Accept"}),": */* see the note below"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"schemas"}),": ",(0,s.jsxs)(n.em,{children:['["urn:ietf:params:scim:api:messages:2.0',":PatchOp",'"]']})," see the note below"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"operations"}),": ",(0,s.jsx)(n.code,{children:'[{"op":"replace","value": {"password": "new_pass", "urn:ietf:params:scim:schemas:extension:ibm:2.0:Notification":{"notifyType":"EMAIL","notifyPassword": true}}}]'}),' replace new_pass with the new password you would like, and if you would like to disable email notifications set "notifyPassword" to false. For clarity on why it neeeds to be this way, see the note below']}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"a-note-on-schemas-arrays-and-watsonx-assistants-general-quirkiness",children:"A note on schemas, arrays, and watsonx assistant's general quirkiness"}),"\n",(0,s.jsxs)(n.p,{children:["You may have noticed that some of the inputs to these extensions were unusual. Watsonx assistant's goal is to abstract away most of the complicated technical details away from the user so that they can focus on making the chatbot flows that they need. This works well for the most part, but when the user needs to add custom extensions with more complex request or response data formats the system starts to show its cracks. In particular, any input that involves a json array has to be manually typed as an expression, which is what happens for the ",(0,s.jsx)(n.strong,{children:"schema"})," inputs above as well as the ",(0,s.jsx)(n.strong,{children:"operations"})," input for the reset password action. Additionally, watsonx assistant offers no native method for accessing data in json arrays, so the user must determine the step that an array is receieved and use that to write a custom expression to access array values."]}),"\n",(0,s.jsxs)(n.p,{children:["With regards to the ",(0,s.jsx)(n.strong,{children:"Accept"})," and ",(0,s.jsx)(n.strong,{children:"content-type"})," fields, for whatever reason IBM Security Verify will not work if those values are not set as described. I do not know why this is, but trust me, it is necessary."]})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>a});var s=t(7294);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);