<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Create/RAG Document Search/Watsonx_Discovery" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Watsonx Discovery | Unified Virtual Assistant</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ibm-client-engineering.github.io/solution-unified-virtual-agent/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ibm-client-engineering.github.io/solution-unified-virtual-agent/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ibm-client-engineering.github.io/solution-unified-virtual-agent/Create/RAG Document Search/Watsonx_Discovery"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="ibm client engineering, open solutions library"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Watsonx Discovery | Unified Virtual Assistant"><meta data-rh="true" name="description" content="How to setup RAG with Watsonx Discovery"><meta data-rh="true" property="og:description" content="How to setup RAG with Watsonx Discovery"><link data-rh="true" rel="icon" href="/solution-unified-virtual-agent/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ibm-client-engineering.github.io/solution-unified-virtual-agent/Create/RAG Document Search/Watsonx_Discovery"><link data-rh="true" rel="alternate" href="https://ibm-client-engineering.github.io/solution-unified-virtual-agent/Create/RAG Document Search/Watsonx_Discovery" hreflang="en"><link data-rh="true" rel="alternate" href="https://ibm-client-engineering.github.io/solution-unified-virtual-agent/Create/RAG Document Search/Watsonx_Discovery" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/solution-unified-virtual-agent/flight-logs/rss.xml" title="Unified Virtual Assistant RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/solution-unified-virtual-agent/flight-logs/atom.xml" title="Unified Virtual Assistant Atom Feed">






<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GB0XWXF3GE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GB0XWXF3GE",{anonymize_ip:!0})</script><link rel="stylesheet" href="/solution-unified-virtual-agent/assets/css/styles.d269ebb7.css">
<script src="/solution-unified-virtual-agent/assets/js/runtime~main.2fd38391.js" defer="defer"></script>
<script src="/solution-unified-virtual-agent/assets/js/main.6d309d6f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/solution-unified-virtual-agent/"><div class="navbar__logo"><img src="/solution-unified-virtual-agent/img/logo.svg" alt="IBM Client Engineering Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="200" width="200"><img src="/solution-unified-virtual-agent/img/logo-dark.svg" alt="IBM Client Engineering Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="200" width="200"></div><b class="navbar__title text--truncate">| Unified Virtual Assistant</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/solution-unified-virtual-agent/flight-logs">Flight Logs</a><a href="https://github.com/ibm-client-engineering/solution-unified-virtual-agent" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/solution-unified-virtual-agent/">watsonx Orchestrate Unified Virtual Assistant</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/solution-unified-virtual-agent/Business Overview/Overview">Business Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/solution-unified-virtual-agent/Prepare/Requirements">Prepare</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/solution-unified-virtual-agent/Create/Webchat Interface/Static-Webpage">Create</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/solution-unified-virtual-agent/Create/Webchat Interface/Static-Webpage">Webchat Interface</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-unified-virtual-agent/Create/GenAI_routing_create">GenAI Routing</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/solution-unified-virtual-agent/Create/RAG Document Search/Watson_Discovery">RAG Document Search</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-unified-virtual-agent/Create/RAG Document Search/Watson_Discovery">Watson Discovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/solution-unified-virtual-agent/Create/RAG Document Search/Watsonx_Discovery">Watsonx Discovery</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/solution-unified-virtual-agent/Create/Governance/watsonx_gov">Governance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/solution-unified-virtual-agent/Create/Third Party Apps/ServiceNow">Third Party Apps</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/solution-unified-virtual-agent/Create/Subordinate Bots/assistant_custom_extension">Subordinate Bots</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/solution-unified-virtual-agent/Create/Identity and Access Management/IBM_Security_Verify">Identity and Access Management</a></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/solution-unified-virtual-agent/Takeaways">Takeaways</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/solution-unified-virtual-agent/Resources">Resources</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/solution-unified-virtual-agent/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Create</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">RAG Document Search</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Watsonx Discovery</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>watsonx Discovery</h1>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Prerequisite: <a href="/solution-unified-virtual-agent/Prepare/Requirements#watsonx-discovery">watsonx Disovery Software Requirement</a></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-setup">Build setup<a href="#build-setup" class="hash-link" aria-label="Direct link to Build setup" title="Direct link to Build setup">​</a></h2>
<div style="border-bottom:1px solid #000;margin-top:20px;margin-bottom:20px"></div>
<p>Navigate to this <a href="https://github.ibm.com/skol-assets/watsonx-RAG-w-watsonxdiscovery-method2/" target="_blank" rel="noopener noreferrer">github</a>
and download <a href="https://github.ibm.com/skol-assets/watsonx-RAG-w-watsonxdiscovery-method2/blob/main/project/WatsonStudioProjectTemplate.zip" target="_blank" rel="noopener noreferrer">this project file</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-walkthrough">Build Walkthrough<a href="#build-walkthrough" class="hash-link" aria-label="Direct link to Build Walkthrough" title="Direct link to Build Walkthrough">​</a></h2>
<div style="border-bottom:1px solid #000;margin-top:20px;margin-bottom:20px"></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-elasticsearch-resource"><strong>Create Elasticsearch Resource</strong><a href="#create-elasticsearch-resource" class="hash-link" aria-label="Direct link to create-elasticsearch-resource" title="Direct link to create-elasticsearch-resource">​</a></h3>
<p>Make sure to select the Platinum version with native ELSIR model, and be mindful of the RAM allocation.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>We ran into issues with extremely high RAM usage and unreliability, so we provisioned an instance of Elasticsearch with 64GB of RAM, 100GB of storage, and 16 cores. This was probably overkill, and the RAM usage was still over 80%, but we didn&#x27;t have the same issues with Elasticsearch again. We weren&#x27;t exactly sure why this was happening, as our largest index was about 6000 documents and 56.2 MB.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-watson-machine-learning-deployment-space"><strong>Create Watson Machine Learning Deployment Space</strong><a href="#create-watson-machine-learning-deployment-space" class="hash-link" aria-label="Direct link to create-watson-machine-learning-deployment-space" title="Direct link to create-watson-machine-learning-deployment-space">​</a></h3>
<ol>
<li>Navigate to the Deployments section of Watson Studio.</li>
<li>Create a new deployment space.<!-- -->
<ul>
<li>The storage service should automatically be assigned to your Cloud Object Storage service.</li>
<li>Assign your Watson Machine Learning service to the Machine Learning Service.
Once the deployment space is created, navigate to the space&#x27;s Manage tab and copy the Space GUID.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="upload-documents-to-cos-bucket"><strong>Upload Documents to COS Bucket</strong><a href="#upload-documents-to-cos-bucket" class="hash-link" aria-label="Direct link to upload-documents-to-cos-bucket" title="Direct link to upload-documents-to-cos-bucket">​</a></h3>
<ol>
<li>Navigate to the appropriate &quot;Cloud Object Storage&quot; resource and select &quot;Create Bucket&quot;</li>
<li>Select &quot;Create a Custom Bucket&quot; and fill out the necessary fields and press &quot;Create&quot;</li>
<li>Upload the relevant documents</li>
<li>Create a &quot;Content Reader&quot; credential for the Cloud Object Storage resource</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-an-ibm-cloud-api-key"><strong>Create an IBM Cloud API Key</strong><a href="#create-an-ibm-cloud-api-key" class="hash-link" aria-label="Direct link to create-an-ibm-cloud-api-key" title="Direct link to create-an-ibm-cloud-api-key">​</a></h3>
<p>Create an IBM Cloud API key in IBM Cloud <a href="https://cloud.ibm.com/iam/apikeys" target="_blank" rel="noopener noreferrer">here</a> and save it.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-watson-studio-project"><strong>Create the Watson Studio Project</strong><a href="#create-the-watson-studio-project" class="hash-link" aria-label="Direct link to create-the-watson-studio-project" title="Direct link to create-the-watson-studio-project">​</a></h3>
<ol>
<li>Download the &quot;WatsonStudioProjectTemplate.zip&quot;<a href="https://github.ibm.com/skol-assets/watsonx-RAG-w-watsonxdiscovery-method2/tree/main/project" target="_blank" rel="noopener noreferrer">here</a>.</li>
<li>Navigate to the Projects section of Watson Studio and change the context from &quot;Watson Studio&quot; to &quot;watsonx&quot;. You can change the context in the top right corner of the UI.</li>
<li>Select <code>New Project</code> -&gt; <code>Create a new project from a sample or file</code> and upload the zip file from <a href="#build-setup">the &quot;Build Setup&quot;</a></li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="assiciate-wml-instance">Assiciate WML instance<a href="#assiciate-wml-instance" class="hash-link" aria-label="Direct link to Assiciate WML instance" title="Direct link to Assiciate WML instance">​</a></h4>
<ol>
<li>Navigate to the &quot;<code>Manage</code> Tab and Select <code>Associate service +</code> and select the appropriate WML instance</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="populate-parameter-set"><strong>Populate Parameter Set</strong><a href="#populate-parameter-set" class="hash-link" aria-label="Direct link to populate-parameter-set" title="Direct link to populate-parameter-set">​</a></h4>
<ol>
<li>Click on the <code>Notebook_and_Deployment_Parameters</code> parameter set in the project.</li>
<li>Set the <code>wml_space_id</code> and <code>ibm_cloud_apikey</code> to the Space GUID and IBM Cloud API key, respectively.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="complete-connection-to-databases-for-elasticsearch"><strong>Complete Connection to Databases for Elasticsearch</strong><a href="#complete-connection-to-databases-for-elasticsearch" class="hash-link" aria-label="Direct link to complete-connection-to-databases-for-elasticsearch" title="Direct link to complete-connection-to-databases-for-elasticsearch">​</a></h4>
<ol>
<li>Click on the <code>WatsonxDiscovery</code> connection in the project.</li>
<li>In a separate tab, navigate to the Databases for Elasticsearch service on IBM Cloud.</li>
<li>Within the <code>Overview</code> tab scroll down to the <code>Endpoints</code> section and select the <code>HTTPS</code> tab.</li>
<li>Copy the <strong>hostname</strong>, <strong>port</strong>, and <strong>TLS certificate</strong>.</li>
<li>Go to the service credentials tab of the service and create a <code>New Credential</code>.</li>
<li>Copy the username and password under <code>connection.https.authentication</code> in the new service credential JSON.</li>
<li>Return to the Watson Studio project&#x27;s <code>WatsonxDiscovery</code> connection and set the following fields:<!-- -->
<ul>
<li>Edit the URL with the saved values for the <code>HOSTNAME</code> and <code>PORT</code> with the format of <code>https://{HOSTNAME}:{PORT}</code>.</li>
<li>The username and password should be the ones copied from the service credentials.</li>
<li>The SSL certificate should be the TLS certificate.</li>
</ul>
</li>
<li>Select <code>Test connection</code> in the top right corner to validate a working connection.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="complete-connection-to-databases-for-elasticsearch-1"><strong>Complete Connection to Databases for Elasticsearch</strong><a href="#complete-connection-to-databases-for-elasticsearch-1" class="hash-link" aria-label="Direct link to complete-connection-to-databases-for-elasticsearch-1" title="Direct link to complete-connection-to-databases-for-elasticsearch-1">​</a></h4>
<ol>
<li>Click on the <code>CloudObjectStorage</code> connection in the project.</li>
<li>Set the bucket name to the name of the bucket created in the <a href="#add-documents-to-cloud-object-storage">&quot;Add Documents to Cloud Object Storage&quot; step</a>.</li>
<li>In the configuration tab of the bucket in Cloud Object Storage, copy the public endpoint to the Login URL field.</li>
<li>Paste the Cloud Object Storage service credential you created earlier into the &quot;Service credentials&quot; field.</li>
<li>Test the connection by clicking the &quot;Test connection&quot; button. The test should be successful.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-notebooks"><strong>Run Notebooks</strong><a href="#run-notebooks" class="hash-link" aria-label="Direct link to run-notebooks" title="Direct link to run-notebooks">​</a></h3>
<p>Once the setup is complete, the notebooks in the project can be run without errors. For each of the notebooks, make sure to insert the project token via the top-right menu in the notebook UI before running any cells. This creates a cell that connects your notebook to the project and its assets.</p>
<p>Steps:</p>
<ol>
<li>Ingest documents into Elasticsearch via COS or Watson Discovery</li>
<li>Deploy RAG function</li>
</ol>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="watson-discovery-ingest-documents-to-elasticsearch"><strong>Watson Discovery: Ingest Documents to Elasticsearch</strong><a href="#watson-discovery-ingest-documents-to-elasticsearch" class="hash-link" aria-label="Direct link to watson-discovery-ingest-documents-to-elasticsearch" title="Direct link to watson-discovery-ingest-documents-to-elasticsearch">​</a></h4>
<p>The <code>1-file-ingestion-from-dis</code> notebook in the project handles document ingestion from Watson Discovery for Elasticsearch.</p>
<ol>
<li>
<p>Update Project ID and Project Token Values:</p>
<ul>
<li>Navigate to the &quot;Manage&quot; Tab of the watson Studio project and copy the &quot;Project ID&quot; to be used in the notebook.</li>
<li>Navigate to the &quot;Access control&quot; and copy the existing token to be used in the notebook.</li>
</ul>
</li>
<li>
<p>Install the necessary python libraries:</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Only need too install python libs on the first run of the notebook</p></div></div>
<p>Insert new cell and run</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">!pip install nltk --quiet</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">!pip install ibm_watson --quiet</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">!pip install elasticsearch --quiet</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">!pip install llama-index --quiet</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">!pip install llama_index.vector_stores.elasticsearch --quiet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Update the Watson Discovery credentials</p>
<ol>
<li>On the IBM Cloud resource list select the &quot;Watson Discovery&quot; instance</li>
<li>On the &quot;Manage&quot; under &quot;Overview&quot; copy the &quot;API Key&quot; and &quot;URL&quot; value</li>
<li>Click &quot;Launch Discovery&quot; -&gt; &quot;Select the relevant Project&quot; -&gt; &quot;Manage Collections&quot; -&gt; click relevanty collection</li>
<li>Grab the Collection ID from the url after &quot;/collection/&quot;</li>
<li>Under the &quot;Integrate and Deploy&quot; section copy the &quot;Project ID&quot;</li>
</ol>
</li>
</ol>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cos-ingest-documents-to-elasticsearch"><strong>COS: Ingest Documents to Elasticsearch</strong><a href="#cos-ingest-documents-to-elasticsearch" class="hash-link" aria-label="Direct link to cos-ingest-documents-to-elasticsearch" title="Direct link to cos-ingest-documents-to-elasticsearch">​</a></h4>
<p>The <code>1-file-ingestion-from-cos</code> notebook in the project handles document ingestion from Watson Discovery for Elasticsearch.</p>
<ol>
<li>
<p>Update Project ID and Project Token Values:</p>
<ul>
<li>Navigate to the &quot;Manage&quot; Tab of the watson Studio project and copy the &quot;Project ID&quot; to be used in the notebook.</li>
<li>Navigate to the &quot;Access control&quot; and copy the existing token to be used in the notebook.</li>
</ul>
</li>
<li>
<p>Install the necessary python libraries:</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Only need too install python libs on the first run of the notebook</p></div></div>
<p>Insert new cell and run</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">!pip install nltk --quiet</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">!pip install ibm_watson --quiet</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">!pip install elasticsearch --quiet</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">!pip install llama-index --quiet</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">!pip install llama_index.vector_stores.elasticsearch --quiet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Update the COS credentials</p>
</li>
<li>
<p>Create a new <code>index_name</code> for each new collection of data (if applicable)</p>
</li>
</ol>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-rag-function-in-watson-machine-learning"><strong>Deploy RAG Function in Watson Machine Learning</strong><a href="#deploy-rag-function-in-watson-machine-learning" class="hash-link" aria-label="Direct link to deploy-rag-function-in-watson-machine-learning" title="Direct link to deploy-rag-function-in-watson-machine-learning">​</a></h4>
<p>The <code>2-deploy-rag-function-in-wml</code> notebook in the project handles the deployment of a Python function that performs RAG using the Databases for Elasticsearch database and watsonx.ai. This step is not necessary if you plan to use the native search integration in watsonx Assistant. Optionally, you can test your deployment using the third notebook <code>3-test-rag-deployment</code> in the project. This notebook calls the deployment endpoint and reformats the deployment responses for better readability.</p>
<ol>
<li>
<p>Update Project ID and Project Token Values</p>
<ul>
<li>Navigate to the &quot;Manage&quot; Tab of the watson Studio project and copy the &quot;Project ID&quot; to be used in the notebook.</li>
<li>Navigate to the &quot;Access control&quot; and copy the existing token to be used in the notebook.</li>
</ul>
</li>
<li>
<p>Install the following libraries:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">    !pip install nltk --quiet</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    !pip install ibm_watson --quiet</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    !pip install elasticsearch --quiet</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    !pip install llama-index --quiet</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    !pip install llama_index.vector_stores.elasticsearch --quiet</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    ```</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Deploy seperate functions for each index created</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Note down the <code>deployment_id</code> for each function for each index to be leveraged for the Assistant integration</p></div></div>
</li>
<li>
<p>Run cell under &quot;Update project assets&quot; to generate the OpenApi Spec for assistant integrations (if applicable)</p>
</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="assistant-integration"><strong>Assistant Integration</strong><a href="#assistant-integration" class="hash-link" aria-label="Direct link to assistant-integration" title="Direct link to assistant-integration">​</a></h3>
<p>watsonx Assistant provides the query interface, using either:</p>
<ul>
<li><a href="#deploy-rag-function-in-watson-machine-learning">Custom Extension for RAG Deploment Configuration</a>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Useful for routing queries/requests to different collections of data</p></div></div>
</li>
<li>Native Extension.<!-- -->
<ul>
<li>The assets for setting up watsonx Assistant are located in the <a href="/solution-unified-virtual-agent/Create/RAG Document Search/assistant/">assistant folder</a> of this repository, and are also included in the Watson Studio project for convenience.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="custom-extension"><strong>Custom Extension</strong><a href="#custom-extension" class="hash-link" aria-label="Direct link to custom-extension" title="Direct link to custom-extension">​</a></h4>
<ol>
<li>Within the Assistant Builder&#x27;s sidebar navigate to the &quot;Integrations&quot; section and</li>
<li>Select &quot;Build custom extension&quot;</li>
<li>Upload the OpenApi spec from step 4 of <a href="#deploy-rag-function-in-watson-machine-learning">RAG Deploment Extension Configuration</a> and press &quot;Finish&quot;</li>
<li>Select &quot;Add+&quot; within the newly configured extension</li>
<li>Select &quot;Next&quot; -&gt; &quot;Authentication type: OAuth 2.0&quot;</li>
<li>Enter the API Key value from <a href="#create-an-ibm-cloud-api-key">here</a></li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="native-extension"><strong>Native Extension</strong><a href="#native-extension" class="hash-link" aria-label="Direct link to native-extension" title="Direct link to native-extension">​</a></h4>
<p>To configure watsonx Assistant to use the native search extension, follow these steps:</p>
<ol>
<li>In the integrations tab on the bottom left of the watsonx Assistant user interface, select the search extension and then Elasticsearch.</li>
<li>Use the Databases for Elasticsearch credentials obtained in the <a href="#complete-connection-to-databases-for-elasticsearch">Complete Connection to Databases For Elasticsearch section</a> to fill out the next page.<!-- -->
<ul>
<li>Note that &quot;https://&quot; should be appended before the hostname obtained from the Elasticsearch credentials.</li>
<li>The index name should be the <code>es_index_name</code> from your project&#x27;s parameter set.</li>
</ul>
</li>
<li>In the &quot;Configure result content&quot; section, set the Title to <code>file_name</code>, Body to <code>text_field</code>, and URL to <code>url</code>. If you modified your <code>es_index_text_field</code> in your static notebooks parameters, the body should be set to the modified value.</li>
<li>Under &quot;Advanced Elasticsearch settings&quot;, set the query body to</li>
</ol>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">{</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  &quot;sort&quot;: [</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      &quot;_score&quot;: &quot;desc&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  &quot;query&quot;: {</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &quot;text_expansion&quot;: {</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      &quot;ml.tokens&quot;: {</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        &quot;model_id&quot;: &quot;.elser_model_1&quot;,</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        &quot;model_text&quot;: &quot;$QUERY$&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="5">
<li>Enable conversational search and save the extension. Conversational search is a beta feature that you need to request access for <a href="https://form.asana.com/?k=U0gIIpwhM2_LY8r8LC_qDw&amp;d=8612789739828" target="_blank" rel="noopener noreferrer">here</a>.</li>
</ol>
<p>Once you have finished configuring the search extension, configure the assistant&#x27;s actions as follows:</p>
<ol start="6">
<li>In the &quot;No action matches&quot; action, set the assistant &quot;Search for the answer&quot;.</li>
<li>Save your action and navigate to the preview tab. Your assistant is now configured. Test it out by passing in natural language queries regarding your document collection.</li>
</ol>
<p>Please refer to <a href="https://cloud.ibm.com/docs/watson-assistant?topic=watson-assistant-search-elasticsearch-add" target="_blank" rel="noopener noreferrer">the official documentation</a> for more information on using the native search extension.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="assistant-integration-utility"><strong>Assistant Integration Utility</strong><a href="#assistant-integration-utility" class="hash-link" aria-label="Direct link to assistant-integration-utility" title="Direct link to assistant-integration-utility">​</a></h3>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Dependent Steps: <a href="#assistant-integration">Assistant Integration</a></p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="assistant-action-integrationn"><strong>Assistant Action Integrationn</strong><a href="#assistant-action-integrationn" class="hash-link" aria-label="Direct link to assistant-action-integrationn" title="Direct link to assistant-action-integrationn">​</a></h4>
<ol>
<li>Within the appropriate action step select &quot;And then&quot; option as &quot;Use an extension&quot; and select the appropriate watsonx Discovery extension</li>
<li>For &quot;Operation&quot; select &quot;Get the predications&quot;</li>
<li>For the &quot;Parameters&quot; set:<!-- -->
<ul>
<li>input_data: Expression type as <code>[{&quot;fields&quot;: [&quot;Text&quot;],&quot;values&quot;: [[input.text]]}]</code></li>
<li>wml_deploment_id&quot;: deployment_id from step 3 of <a href="#deploy-rag-function-in-watson-machine-learning">Custom Extension for RAG Deploment Configuration</a></li>
</ul>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="extract-wxd-values-to-user"><strong>Extract WxD Values to User</strong><a href="#extract-wxd-values-to-user" class="hash-link" aria-label="Direct link to extract-wxd-values-to-user" title="Direct link to extract-wxd-values-to-user">​</a></h4>
<p>llm_response value:</p>
<p><code>${[APPROPRIATE_STEP]_result_1.body.predictions[0].llm_response}</code></p>
<p>Source links:</p>
<p><code>${[APPROPRIATE_STEP]_result_1.body.references[VALUE].metadata.file_name}</code></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/solution-unified-virtual-agent/Create/RAG Document Search/Watson_Discovery"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Watson Discovery</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/solution-unified-virtual-agent/Create/Governance/watsonx_gov"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">watsonx.gov</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#build-setup" class="table-of-contents__link toc-highlight">Build setup</a></li><li><a href="#build-walkthrough" class="table-of-contents__link toc-highlight">Build Walkthrough</a><ul><li><a href="#create-elasticsearch-resource" class="table-of-contents__link toc-highlight"><strong>Create Elasticsearch Resource</strong></a></li><li><a href="#create-watson-machine-learning-deployment-space" class="table-of-contents__link toc-highlight"><strong>Create Watson Machine Learning Deployment Space</strong></a></li><li><a href="#upload-documents-to-cos-bucket" class="table-of-contents__link toc-highlight"><strong>Upload Documents to COS Bucket</strong></a></li><li><a href="#create-an-ibm-cloud-api-key" class="table-of-contents__link toc-highlight"><strong>Create an IBM Cloud API Key</strong></a></li><li><a href="#create-the-watson-studio-project" class="table-of-contents__link toc-highlight"><strong>Create the Watson Studio Project</strong></a><ul><li><a href="#assiciate-wml-instance" class="table-of-contents__link toc-highlight">Assiciate WML instance</a></li><li><a href="#populate-parameter-set" class="table-of-contents__link toc-highlight"><strong>Populate Parameter Set</strong></a></li><li><a href="#complete-connection-to-databases-for-elasticsearch" class="table-of-contents__link toc-highlight"><strong>Complete Connection to Databases for Elasticsearch</strong></a></li><li><a href="#complete-connection-to-databases-for-elasticsearch-1" class="table-of-contents__link toc-highlight"><strong>Complete Connection to Databases for Elasticsearch</strong></a></li></ul></li><li><a href="#run-notebooks" class="table-of-contents__link toc-highlight"><strong>Run Notebooks</strong></a><ul><li><a href="#watson-discovery-ingest-documents-to-elasticsearch" class="table-of-contents__link toc-highlight"><strong>Watson Discovery: Ingest Documents to Elasticsearch</strong></a></li><li><a href="#cos-ingest-documents-to-elasticsearch" class="table-of-contents__link toc-highlight"><strong>COS: Ingest Documents to Elasticsearch</strong></a></li><li><a href="#deploy-rag-function-in-watson-machine-learning" class="table-of-contents__link toc-highlight"><strong>Deploy RAG Function in Watson Machine Learning</strong></a></li></ul></li><li><a href="#assistant-integration" class="table-of-contents__link toc-highlight"><strong>Assistant Integration</strong></a><ul><li><a href="#custom-extension" class="table-of-contents__link toc-highlight"><strong>Custom Extension</strong></a></li><li><a href="#native-extension" class="table-of-contents__link toc-highlight"><strong>Native Extension</strong></a></li></ul></li><li><a href="#assistant-integration-utility" class="table-of-contents__link toc-highlight"><strong>Assistant Integration Utility</strong></a><ul><li><a href="#assistant-action-integrationn" class="table-of-contents__link toc-highlight"><strong>Assistant Action Integrationn</strong></a></li><li><a href="#extract-wxd-values-to-user" class="table-of-contents__link toc-highlight"><strong>Extract WxD Values to User</strong></a></li></ul></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Explore</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM</a></li><li class="footer__item"><a href="https://www.ibm.com/client-engineering" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM Client Engineering</a></li><li class="footer__item"><a href="https://github.com/ibm-client-engineering" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM Client Engineering Solutions Hub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://ibm.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="https://www.ibm.com/brand/experience-guides/developer/8f4e3cc2b5d52354a6d43c8edba1e3c9/02_8-bar-reverse.svg" alt="IBM Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="200" height="150"><img src="https://www.ibm.com/brand/experience-guides/developer/8f4e3cc2b5d52354a6d43c8edba1e3c9/02_8-bar-reverse.svg" alt="IBM Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="200" height="150"></a></div></div></div></footer></div>
</body>
</html>